(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{215:function(e,t,r){e.exports=r(500)},411:function(e,t){},413:function(e,t){},448:function(e,t){},449:function(e,t){},495:function(e,t,r){},496:function(e,t,r){},497:function(e,t,r){},498:function(e,t,r){},499:function(e,t,r){},500:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),c=r(92),u=r.n(c),l=r(61),s=r(40),o=r(139),i=r(62),E=r.n(i),p=r(93),m=(r(142),r(212)),d=function(e){if(e.ok)return e;throw new Error(e.statusText)},f=function(){var e=Object(p.a)(E.a.mark(function e(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=d,e.next=3,fetch("http://data.fixer.io/api/latest?access_key=26d6132618a9e2ec422be84ba48a260a");case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1).json());case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),h=(r(495),"__"),S="_";var v=function(e){return function(t){var r,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"===typeof t?r=t:a=t||{},n=Array.isArray(a)?a:Object.keys(a).filter(function(e){return a[e]})||[],function(e){var t=e.b,r=e.e,n=e.m,a=r?[t,r].join(h):t;return[a].concat(Object(s.a)(n.map(function(e){return[a,e].join(S)}))).join(" ").trim()}({b:e,e:r,m:n})}},b=v("RequestForm"),y=Object(l.b)(null,{purchase:function(e,t,r,n){return{type:"PURCHASE",id:arguments.length>4&&void 0!==arguments[4]?arguments[4]:Object(m.v4)(),date:e,price:parseFloat(t),currency:r,productName:n}},showAllPurchases:function(){return{type:"SHOW_ALL_PURCHASES"}},clearPurchasesByDate:function(e){return{type:"CLEAR_PURCHASES_BY_DATE",date:e}},reportAboutPurchases:function(e){return{type:"REPORT_ABOUT_PURCHASES",totalIncome:e}},showErrorMessage:function(e){return{type:"SHOW_ERROR_MESSAGE",error:e}},showHelpMessage:function(){return{type:"SHOW_HELP_MESSAGE"}}})(function(e){var t=e.purchase,r=e.showAllPurchases,c=e.showErrorMessage,u=e.clearPurchasesByDate,l=e.reportAboutPurchases,i=e.allPurchases,E=e.currencyData,p=e.showHelpMessage,m=Object(n.useState)(""),d=Object(o.a)(m,2),f=d[0],h=d[1],S=Object(n.useState)(!1),v=Object(o.a)(S,2),y=v[0],C=v[1],R={purchase:t,all:r,clear:u,report:function(e,t){var r=0;i.filter(function(t){return t.id.slice(0,4)===e}).map(function(e){return e.purchases.map(function(e){e.currency!==t?r+=e.price/E[e.currency]*E[t]:r+=e.price})}),l("".concat(Number(r.toFixed(2))," ").concat(t))},help:p},_=function(){C(!y)},g=y?"#7f8fa6":"#bdc3c7";return a.a.createElement("form",{action:"",className:b(),onSubmit:function(e){return function(e){e.preventDefault();var r=f.split(" ");if(R.hasOwnProperty(r[0]))if(R[r[0]]===t&&r.slice(1).length>4){var n="";r.slice(1)[3].match(/"*/)&&r.slice(4).forEach(function(e){return n+=" ".concat(e)}),R[r[0]].apply(R,Object(s.a)(r.slice(1,4)).concat([n]))}else R[r[0]].apply(R,Object(s.a)(r.slice(1)));else c("Error: No such command.")}(e)}},a.a.createElement("input",{type:"text",name:"query",placeholder:"Type your query here...",className:b("input"),onChange:function(e){e.preventDefault(),h(e.target.value)}}),a.a.createElement("button",{className:b("submit"),type:"submit",style:{backgroundColor:g},onMouseDown:_,onMouseUp:_},"Click to Submit"))}),C=(r(496),v("PurchasesBlock")),R=function(e){var t=e.date,r=e.allPurchases;return a.a.createElement("div",{className:C()},a.a.createElement("h5",{className:C("date")},t),r.map(function(e){return a.a.createElement("p",{key:e.id,className:C("purchase")},e.productName," ",e.price," ",e.currency)}))},_=(r(497),v("Output")),g=function(e){var t=e.allPurchases,r=e.error,n=e.totalIncome,c=e.helpMessage;return r?a.a.createElement("div",{className:_(["error"])},a.a.createElement("h3",{className:_("title")},"Error:"),a.a.createElement("p",{className:_("message")},r,a.a.createElement("br",null),"To get instructions please type: ",a.a.createElement("strong",null,"help"))):n?a.a.createElement("div",{className:_()},a.a.createElement("h3",{className:_("title")},"Output:"),a.a.createElement("p",{className:_("message")},n)):c?a.a.createElement("div",{className:_()},a.a.createElement("h3",{className:_("title")},"Help:"),a.a.createElement("div",{className:_("message")},a.a.createElement("p",null,a.a.createElement("strong",null,"purchase <date> <price> <currency> <productName>")," - add purchase to store.",a.a.createElement("br",null),a.a.createElement("i",null,"Example: purchase 2019-04-25 12 USD Photo ",a.a.createElement("br",null),"Output: ",a.a.createElement("br",null),"2019-04-25 ",a.a.createElement("br",null),"Photo 12 USD")),a.a.createElement("p",null,a.a.createElement("strong",null,"all")," - show all purchases. ",a.a.createElement("br",null),a.a.createElement("i",null,"Example: all ",a.a.createElement("br",null),"Output: ",a.a.createElement("br",null),"2019-04-25 ",a.a.createElement("br",null),"Photo 12 USD")),a.a.createElement("p",null,a.a.createElement("strong",null,"clear <date>")," - removes all purchases for specified date. ",a.a.createElement("br",null),a.a.createElement("i",null,"Example: clear 2019-04-25 ",a.a.createElement("br",null),"Output:")),a.a.createElement("p",null,a.a.createElement("strong",null,"report <year> <currency>")," - calculate the total income for specified year, convert and present it in specified currency. ",a.a.createElement("br",null),a.a.createElement("i",null,"Example: report 2019 UAH ",a.a.createElement("br",null),"Output: ",a.a.createElement("br",null),"356.4 UAH")))):a.a.createElement("div",{className:_()},a.a.createElement("h3",{className:_("title")},"Output:"),t.map(function(e){return a.a.createElement(R,{key:e.id,date:e.id,allPurchases:e.purchases})}))},O=r(23),N=Object(O.combineReducers)({currenciesData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_CURRENCIES_BEGIN":return e;case"FETCH_CURRENCIES_SUCCESS":return t.payload.currencies.rates;case"FETCH_CURRENCIES_FAILURE":default:return e}},isLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"FETCH_CURRENCIES_BEGIN":return!0;case"FETCH_CURRENCIES_SUCCESS":case"FETCH_CURRENCIES_FAILURE":return!1;default:return e}},hasError:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_CURRENCIES_BEGIN":case"FETCH_CURRENCIES_SUCCESS":return null;case"FETCH_CURRENCIES_FAILURE":return t.payload.error;default:return e}}}),A=r(73),U=r(138),H=Object(O.combineReducers)({byDate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PURCHASE":return e.hasOwnProperty(t.date)?Object(U.a)({},e,Object(A.a)({},t.date,{id:t.date,purchases:[].concat(Object(s.a)(e[t.date].purchases),[{id:t.id,date:t.date,price:t.price,currency:t.currency,productName:t.productName}])})):Object(U.a)({},e,Object(A.a)({},t.date,{id:t.date,purchases:[{id:t.id,date:t.date,price:t.price,currency:t.currency,productName:t.productName}]}));case"SHOW_ALL_PURCHASES":return e;case"CLEAR_PURCHASES_BY_DATE":var r=Object.assign({},e);return delete r[t.date],r;default:return e}},allDates:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PURCHASE":return-1===e.indexOf(t.date)?[].concat(Object(s.a)(e),[t.date]):e;case"SHOW_ALL_PURCHASES":return Array.prototype.slice.call(e).sort(function(e,t){return new Date(t)-new Date(e)}).reverse();case"CLEAR_PURCHASES_BY_DATE":return e.filter(function(e){return e!==t.date});default:return e}},errors:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SHOW_ERROR_MESSAGE":return e.error;default:return null}},helpMessage:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"SHOW_HELP_MESSAGE":return!0;default:return!1}},totalIncome:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REPORT_ABOUT_PURCHASES":return e.totalIncome;default:return null}}}),P=Object(O.combineReducers)({currencies:N,souvenirStore:H}),w=function(e){return function(e){return e.currenciesData}(e.currencies)},j=function(e){return function(e){return e.isLoading}(e.currencies)},I=function(e){return function(e){return e.hasError}(e.currencies)},D=function(e){return function(e){return e.allDates.map(function(t){return e.byDate[t]})}(e.souvenirStore)},T=function(e){return function(e){return e.errors}(e.souvenirStore)},L=function(e){return function(e){return e.helpMessage}(e.souvenirStore)},F=function(e){return function(e){return e.totalIncome}(e.souvenirStore)},M=(r(498),v("SouvenirStoreApp")),x=Object(l.b)(function(e){return{currencies:w(e),isLoading:j(e),hasError:I(e),allPurchases:D(e),storeErrorMessage:T(e),totalIncome:F(e),helpMessage:L(e)}},{fetchCurrencies:function(){return function(){var e=Object(p.a)(E.a.mark(function e(t){var r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"FETCH_CURRENCIES_BEGIN"}),e.prev=1,e.next=4,f();case 4:r=e.sent,t({type:"FETCH_CURRENCIES_SUCCESS",payload:{currencies:r}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:"FETCH_CURRENCIES_FAILURE",payload:{error:e.t0}});case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()}})(function(e){var t=e.fetchCurrencies,r=e.currencies,c=e.isLoading,u=e.hasError,l=e.allPurchases,s=e.storeErrorMessage,o=e.totalIncome,i=e.helpMessage;return Object(n.useEffect)(function(){t()},[t]),c?a.a.createElement("div",{className:M("data-error")},"Data is Loading..."):u?a.a.createElement("div",{className:M("data-error")},"Error occurred while fetching API"):a.a.createElement("div",{className:M()},a.a.createElement("h1",{className:M("title")},"Souvenir-store App"),a.a.createElement(y,{allPurchases:l,currencyData:r}),a.a.createElement(g,{allPurchases:l,totalIncome:o,error:s,helpMessage:i}))}),k=function(e){var t=e.children,r=e.store;return a.a.createElement(l.a,{store:r},t)},B=r(213),G=r(214);r(499);u.a.render(a.a.createElement(k,{store:Object(O.createStore)(P,Object(B.composeWithDevTools)(Object(O.applyMiddleware)(G.a)))},a.a.createElement(x,null)),document.getElementById("root"))}},[[215,1,2]]]);
//# sourceMappingURL=main.bad9033d.chunk.js.map