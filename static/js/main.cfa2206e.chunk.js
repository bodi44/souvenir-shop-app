(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t){},108:function(e,t){},143:function(e,t){},144:function(e,t){},190:function(e,t,r){},191:function(e,t,r){},192:function(e,t,r){},193:function(e,t,r){},194:function(e,t,r){},195:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(33),u=r.n(c),l=r(18),s=r(9),o=r(52),i=r(19),E=r.n(i),p=r(34),m=r(90),d=function(e){if(e.ok)return e;throw new Error(e.statusText)},f=function(){var e=Object(p.a)(E.a.mark(function e(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=d,e.next=3,fetch("http://data.fixer.io/api/latest?access_key=26d6132618a9e2ec422be84ba48a260a");case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1).json());case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),h=(r(190),"__"),S="_";var v=function(e){return function(t){var r,a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"===typeof t?r=t:n=t||{},a=Array.isArray(n)?n:Object.keys(n).filter(function(e){return n[e]})||[],function(e){var t=e.b,r=e.e,a=e.m,n=r?[t,r].join(h):t;return[n].concat(Object(s.a)(a.map(function(e){return[n,e].join(S)}))).join(" ").trim()}({b:e,e:r,m:a})}},y=v("RequestForm"),C=Object(l.b)(null,{purchase:function(e,t,r,a){return{type:"PURCHASE",id:Object(m.v4)(),date:e,price:parseFloat(t),currency:r,productName:a}},showAllPurchases:function(){return{type:"SHOW_ALL_PURCHASES"}},clearPurchasesByDate:function(e){return{type:"CLEAR_PURCHASES_BY_DATE",date:e}},reportAboutPurchases:function(e){return{type:"REPORT_ABOUT_PURCHASES",totalIncome:e}},showErrorMessage:function(e){return{type:"SHOW_ERROR_MESSAGE",error:e}},showHelpMessage:function(){return{type:"SHOW_HELP_MESSAGE"}}})(function(e){var t=e.purchase,r=e.showAllPurchases,c=e.showErrorMessage,u=e.clearPurchasesByDate,l=e.reportAboutPurchases,i=e.allPurchases,E=e.currencyData,p=e.showHelpMessage,m=Object(a.useState)(""),d=Object(o.a)(m,2),f=d[0],h=d[1],S=Object(a.useState)(!1),v=Object(o.a)(S,2),C=v[0],b=v[1],R={purchase:t,all:r,clear:u,report:function(e,t){var r=0;i.filter(function(t){return t.id.slice(0,4)===e}).map(function(e){return e.purchases.map(function(e){e.currency!==t?r+=e.price/E[e.currency]*E[t]:r+=e.price})}),l("".concat(Number(r.toFixed(2))," ").concat(t))},help:p},_=function(){b(!C)},O=C?"#7f8fa6":"#bdc3c7";return n.a.createElement("form",{action:"",className:y(),onSubmit:function(e){return function(e){e.preventDefault();var r=f.split(" ");if(R.hasOwnProperty(r[0]))if(R[r[0]]===t&&r.slice(1).length>4){var a="";r.slice(1)[3].match(/"*/)&&r.slice(4).forEach(function(e){return a+=" ".concat(e)}),R[r[0]].apply(R,Object(s.a)(r.slice(1,4)).concat([a]))}else R[r[0]].apply(R,Object(s.a)(r.slice(1)));else c("Error: No such command.")}(e)}},n.a.createElement("input",{type:"text",name:"query",placeholder:"Type your query here...",className:y("input"),onChange:function(e){e.preventDefault(),h(e.target.value)}}),n.a.createElement("button",{className:y("submit"),type:"submit",style:{backgroundColor:O},onMouseDown:_,onMouseUp:_},"Click to Submit"))}),b=(r(191),v("PurchasesBlock")),R=function(e){var t=e.date,r=e.allPurchases;return n.a.createElement("div",{className:b()},n.a.createElement("h5",{className:b("date")},t),r.map(function(e){return n.a.createElement("p",{key:e.id,className:b("purchase")},e.productName," ",e.price," ",e.currency)}))},_=(r(192),v("Output")),O=function(e){var t=e.allPurchases,r=e.error,a=e.totalIncome,c=e.helpMessage;return r?n.a.createElement("div",{className:_(["error"])},n.a.createElement("h3",{className:_("title")},"Error:"),n.a.createElement("p",{className:_("message")},r,n.a.createElement("br",null),"To get instructions please type: ",n.a.createElement("strong",null,"help"))):a?n.a.createElement("div",{className:_()},n.a.createElement("h3",{className:_("title")},"Output:"),n.a.createElement("p",{className:_("message")},a)):c?n.a.createElement("div",{className:_()},n.a.createElement("h3",{className:_("title")},"Help:"),n.a.createElement("div",{className:_("message")},n.a.createElement("p",null,n.a.createElement("strong",null,"purchase <date> <price> <currency> <productName>")," - add purchase to store.",n.a.createElement("br",null),n.a.createElement("i",null,"Example: purchase 2019-04-25 12 USD Photo ",n.a.createElement("br",null),"Output: ",n.a.createElement("br",null),"2019-04-25 ",n.a.createElement("br",null),"Photo 12 USD")),n.a.createElement("p",null,n.a.createElement("strong",null,"all")," - show all purchases. ",n.a.createElement("br",null),n.a.createElement("i",null,"Example: all ",n.a.createElement("br",null),"Output: ",n.a.createElement("br",null),"2019-04-25 ",n.a.createElement("br",null),"Photo 12 USD")),n.a.createElement("p",null,n.a.createElement("strong",null,"clear <date>")," - removes all purchases for specified date. ",n.a.createElement("br",null),n.a.createElement("i",null,"Example: clear 2019-04-25 ",n.a.createElement("br",null),"Output:")),n.a.createElement("p",null,n.a.createElement("strong",null,"report <year> <currency>")," - calculate the total income for specified year, convert and present it in specified currency. ",n.a.createElement("br",null),n.a.createElement("i",null,"Example: report 2019 UAH ",n.a.createElement("br",null),"Output: ",n.a.createElement("br",null),"356.4 UAH")))):n.a.createElement("div",{className:_()},n.a.createElement("h3",{className:_("title")},"Output:"),t.map(function(e){return n.a.createElement(R,{key:e.id,date:e.id,allPurchases:e.purchases})}))},g=r(35),A=r(12),N=Object(A.combineReducers)({currenciesData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_CURRENCIES_BEGIN":return e;case"FETCH_CURRENCIES_SUCCESS":return t.payload.currencies.rates;case"FETCH_CURRENCIES_FAILURE":return t.payload.error;default:return e}},isLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"FETCH_CURRENCIES_BEGIN":return!0;case"FETCH_CURRENCIES_SUCCESS":case"FETCH_CURRENCIES_FAILURE":return!1;default:return e}},hasError:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_CURRENCIES_BEGIN":case"FETCH_CURRENCIES_SUCCESS":return null;case"FETCH_CURRENCIES_FAILURE":return t.payload.error;default:return e}}}),U=r(13),P=r(26),H=Object(g.a)({byDate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PURCHASE":return e.hasOwnProperty(t.date)?Object(P.a)({},e,Object(U.a)({},t.date,{id:t.date,purchases:[].concat(Object(s.a)(e[t.date].purchases),[{id:t.id,date:t.date,price:t.price,currency:t.currency,productName:t.productName}])})):Object(P.a)({},e,Object(U.a)({},t.date,{id:t.date,purchases:[{id:t.id,date:t.date,price:t.price,currency:t.currency,productName:t.productName}]}));case"SHOW_ALL_PURCHASES":return e;case"CLEAR_PURCHASES_BY_DATE":var r=Object.assign({},e);return delete r[t.date],r;case"REPORT_ABOUT_PURCHASES":default:return e}},allDates:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PURCHASE":return-1===e.indexOf(t.date)?[].concat(Object(s.a)(e),[t.date]):e;case"SHOW_ALL_PURCHASES":return Array.prototype.slice.call(e).sort(function(e,t){return new Date(t)-new Date(e)}).reverse();case"CLEAR_PURCHASES_BY_DATE":return e.filter(function(e){return e!==t.date});case"REPORT_ABOUT_PURCHASES":default:return e}},errors:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SHOW_ERROR_MESSAGE":return e.error;default:return null}},helpMessage:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"SHOW_HELP_MESSAGE":return!0;default:return!1}},totalIncome:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REPORT_ABOUT_PURCHASES":return e.totalIncome;default:return null}}}),w=Object(g.a)({currencies:N,souvenirStore:H}),j=function(e){return function(e){return e.currenciesData}(e.currencies)},I=function(e){return function(e){return e.isLoading}(e.currencies)},T=function(e){return function(e){return e.hasError}(e.currencies)},D=function(e){return function(e){return e.allDates.map(function(t){return e.byDate[t]})}(e.souvenirStore)},L=function(e){return function(e){return e.errors}(e.souvenirStore)},F=function(e){return function(e){return e.helpMessage}(e.souvenirStore)},M=function(e){return function(e){return e.totalIncome}(e.souvenirStore)},x=(r(193),v("SouvenirStoreApp")),B=Object(l.b)(function(e){return{currencies:j(e),isLoading:I(e),hasError:T(e),allPurchases:D(e),storeErrorMessage:L(e),totalIncome:M(e),helpMessage:F(e)}},{fetchCurrencies:function(){return function(){var e=Object(p.a)(E.a.mark(function e(t){var r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"FETCH_CURRENCIES_BEGIN"}),e.prev=1,e.next=4,f();case 4:r=e.sent,t({type:"FETCH_CURRENCIES_SUCCESS",payload:{currencies:r}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:"FETCH_CURRENCIES_FAILURE",payload:{error:e.t0}});case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()}})(function(e){var t=e.fetchCurrencies,r=e.currencies,c=e.isLoading,u=e.hasError,l=e.allPurchases,s=e.storeErrorMessage,o=e.totalIncome,i=e.helpMessage;return Object(a.useEffect)(function(){t()},[t]),c?n.a.createElement("div",{className:x("data-error")},"Data is Loading..."):u?n.a.createElement("div",{className:x("data-error")},"Error occurred while fetching API: ",u):n.a.createElement("div",{className:x()},n.a.createElement("h1",{className:x("title")},"Souvenir-store App"),n.a.createElement(C,{allPurchases:l,currencyData:r}),n.a.createElement(O,{allPurchases:l,totalIncome:o,error:s,helpMessage:i}))}),k=function(e){var t=e.children,r=e.store;return n.a.createElement(l.a,{store:r},t)},G=r(91),W=r(92);r(194);u.a.render(n.a.createElement(k,{store:Object(A.createStore)(w,Object(G.composeWithDevTools)(Object(A.applyMiddleware)(W.a)))},n.a.createElement(B,null)),document.getElementById("root"))},93:function(e,t,r){e.exports=r(195)}},[[93,1,2]]]);
//# sourceMappingURL=main.cfa2206e.chunk.js.map